<div class="room-management user-management-card">
  <h2>Quản lý đặt phòng</h2>

  <app-booking-filter
    [filter]="filter"
    [bookingStatuses]="bookingStatuses"
    [bookingMethods]="bookingMethods"
    (onFilter)="onFilterChange()"
    (onReset)="onResetFilter()"
    (onToday)="onTodayBookings()"
  />

  <app-booking-table
    [bookings]="bookings"
    (onEdit)="onOpenPopup(false, $event)"
    (onViewDetail)="onOpenPopup(true, $event)"
  />

  <div *ngIf="selectedBooking && isEditPopupOpen">
    <app-booking-status-popup
      [visible]="isEditPopupOpen"
      [booking]="selectedBooking"
      (onClose)="onClosePopup()"
      (onConfirm)="handleConfirm($event)"
      (onCheckIn)="handleCheckIn($event)"
      (onCheckOut)="handleCheckOut($event)"
      (onCancel)="handleCancel($event)"
    />
  </div>

  <app-booking-detail-popup
    [visible]="isDetailPopupOpen"
    [booking]="selectedBooking"
    [onClose]="onClosePopup.bind(this)"
  />

  <app-pagination
    [total]="filter.total"
    [limit]="filter.limit"
    [page]="filter.page"
    (pageChange)="onPageChange($event)"
  />
</div>
