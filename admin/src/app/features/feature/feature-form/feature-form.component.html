<div class="popup-add-popup">
  <div class="popup-content">
    <h2>{{ isEdit ? "Sửa" : "Thêm" }} tiện nghi</h2>

    <form (ngSubmit)="submitForm.emit()" #editForm="ngForm">
      <div class="popup-section">
        <div class="form-floating form-floating-custom mb-3">
          <input
            type="email"
            class="form-control"
            id="name"
            name="name"
            [(ngModel)]="feature.name"
            required
          />
          <label for="name">Tên tiện nghi</label>
        </div>
      </div>

      <div class="popup-section">
        <div class="form-floating form-floating-custom mb-3">
          <input
            type="email"
            class="form-control"
            id="icon"
            name="icon"
            [(ngModel)]="feature.icon"
            required
          />
          <label for="icon">Icon tiện nghi</label>
        </div>
      </div>

      <div class="popup-section">
        <label for="description">Mô tả:</label>
        <textarea
          class="form-control mb-3"
          id="description"
          name="description"
          [(ngModel)]="feature.description"
        ></textarea>
      </div>

      <div class="popup-section">
        <label for="editImage">Ảnh:</label>
        <input
          type="file"
          id="editImage"
          class="form-control mb-3"
          (change)="onFileInputChange($event)"
        />

        <div class="popup-section">
          <label for="image">Ảnh (file):</label>
          <input
            type="file"
            id="image"
            name="image"
            (change)="onFileInputChange($event)"
          />
          <!-- Ưu tiên preview nếu có -->
          <div *ngIf="imagePreview; else currentImage">
            <label>Ảnh preview:</label>
            <img [src]="imagePreview" width="120px" height="100px" />
          </div>

          <ng-template #currentImage>
            <div *ngIf="feature.image">
              <label>Ảnh hiện tại:</label>
              <img
                [src]="feature.image"
                width="120px"
                height="100px"
              />
            </div>
          </ng-template>
        </div>
      </div>

      <div class="popup-actions">
        <button
          class="btn btn-success"
          type="submit"
          [disabled]="!editForm.form.valid"
        >
          Lưu
        </button>
        <button class="btn btn-danger" type="button" (click)="close.emit()">
          Hủy
        </button>
      </div>
    </form>
  </div>
</div>
