<div class="user-management-card">
  <h2>Quản lí khách hàng</h2>

  <!-- Table Header -->
  <div class="table-header">
    <div>STT</div>
    <div>Tên</div>
    <div>Email</div>
    <div>Phone</div>
    <div>Địa chỉ</div>
    <div>Ghi chú</div>
    <div>Trạng thái</div>
  </div>

  <!-- User Detail Popup -->
  <div class="popup-overlay" *ngIf="isDetailPopupOpen && selectedUser">
    <div class="popup-content">
      <h2>Customer Detail</h2>

      <div class="popup-section">
        <label>Full Name:</label>
        <span>{{ selectedUser.fullName }}</span>
      </div>
      <div class="popup-section">
        <label>Email:</label>
        <span>{{ selectedUser.email }}</span>
      </div>
      <div class="popup-section">
        <label>Phone Number:</label>
        <span>{{ selectedUser.phoneNumber }}</span>
      </div>
      <div class="popup-section">
        <label>Address:</label>
        <span>{{ selectedUser.address }}</span>
      </div>
      <div class="popup-section">
        <label>Request:</label>
        <span>{{ selectedUser.requestNote || '—' }}</span>
      </div>
      <div class="popup-section">
        <label>Status:</label>
        <span [class.active]="selectedUser.isActive" [class.inactive]="!selectedUser.isActive">
          {{ selectedUser.isActive ? 'Active' : 'Inactive' }}
        </span>
      </div>

      <button class="close-btn" (click)="isDetailPopupOpen = false">Close</button>
    </div>
  </div>

  <!-- Table Body -->
  <div *ngFor="let user of users; let i = index" class="table-row">
    <div>{{ i + 1 }}</div>
    <div (click)="onViewUserDetail(user)" class="clickable-name">{{ user.fullName }}</div>
    <div>{{ user.email }}</div>
    <div>{{ user.phoneNumber }}</div>
    <div>{{ user.address }}</div>
    <div>{{ user.requestNote || '—' }}</div>
    <div class="status-toggle">
      <label class="switch">
        <input type="checkbox" [checked]="user.isActive" (click)="onToggleUserStatus($event, user)" />
        <span class="slider"></span>
      </label>
    </div>
  </div>
</div>
